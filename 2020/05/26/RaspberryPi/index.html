<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="操作指南,RaspberryPi,树莓派," />










<meta name="description" content="树莓派折腾清单 初始化树莓派首先，你得有个树莓派，一张够大的TF卡（8G以上）。 安装Raspbian官网下载Raspbian镜像，我使用的是Raspbian Buster with desktop and recommended software，另外两个没试过不知道好不好。 下载Win32 Disk Imager进行烧录，把.img文件烧录到TF卡里。 烧录完后把卡插进树莓派，就可以正常开机了">
<meta property="og:type" content="article">
<meta property="og:title" content="RaspberryPi">
<meta property="og:url" content="https://jarvishh.github.io/2020/05/26/RaspberryPi/index.html">
<meta property="og:site_name" content="HH❤Hexo">
<meta property="og:description" content="树莓派折腾清单 初始化树莓派首先，你得有个树莓派，一张够大的TF卡（8G以上）。 安装Raspbian官网下载Raspbian镜像，我使用的是Raspbian Buster with desktop and recommended software，另外两个没试过不知道好不好。 下载Win32 Disk Imager进行烧录，把.img文件烧录到TF卡里。 烧录完后把卡插进树莓派，就可以正常开机了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jarvishh.github.io/images/20170222174817450.jpg">
<meta property="article:published_time" content="2020-05-26T04:40:34.000Z">
<meta property="article:modified_time" content="2020-05-31T12:20:51.171Z">
<meta property="article:author" content="HH">
<meta property="article:tag" content="操作指南">
<meta property="article:tag" content="RaspberryPi">
<meta property="article:tag" content="树莓派">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jarvishh.github.io/images/20170222174817450.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jarvishh.github.io/2020/05/26/RaspberryPi/"/>





  <title>RaspberryPi | HH❤Hexo</title>
  








<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">HH❤Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jarvishh.github.io/2020/05/26/RaspberryPi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/hh.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HH❤Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">RaspberryPi</h1>
        

        <div class="post-meta">
          
          
            <i class="fa fa-thumb-tack"></i>
            <font color=9999FF>置顶</font>
            <span class="post-meta-divider">|</span>
          
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-26T12:40:34+08:00">
                2020-05-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/" itemprop="url" rel="index">
                    <span itemprop="name">操作指南</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>树莓派折腾清单</p>
<h2 id="初始化树莓派"><a href="#初始化树莓派" class="headerlink" title="初始化树莓派"></a>初始化树莓派</h2><p>首先，你得有个树莓派，一张够大的TF卡（8G以上）。</p>
<h3 id="安装Raspbian"><a href="#安装Raspbian" class="headerlink" title="安装Raspbian"></a>安装Raspbian</h3><p><a href="https://www.raspberrypi.org/" target="_blank" rel="noopener">官网</a>下载Raspbian镜像，我使用的是<code>Raspbian Buster with desktop and recommended software</code>，另外两个没试过不知道好不好。</p>
<p>下载Win32 Disk Imager进行烧录，把<code>.img</code>文件烧录到TF卡里。</p>
<p>烧录完后把卡插进树莓派，就可以正常开机了。</p>
<p>按照个人喜好设定一下地区、时区、密码什么的。</p>
<p>到这里你就可以骄傲地向别人炫耀你有一台树莓派了！</p>
<h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><p>如果没有专门的一套显示器、键鼠给树莓派使用，先看看后文的“网络连接”和“SSH”，如果有就可以暂时跳过，直接插上卡开机，等用得到再回来看。</p>
<h3 id="网络连接"><a href="#网络连接" class="headerlink" title="网络连接"></a>网络连接</h3><h4 id="有线"><a href="#有线" class="headerlink" title="有线"></a>有线</h4><p>有线就没什么好说的，插上网线就能用了。</p>
<h4 id="Wifi"><a href="#Wifi" class="headerlink" title="Wifi"></a>Wifi</h4><p>如果有键盘鼠标，可以插上TF卡进系统设置。</p>
<p>如果没有的话：</p>
<p>在<strong>电脑</strong>里打开TF卡，新建一个名为<code>wpa_supplicant.conf</code>的文件，打开在里面输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">country&#x3D;CN</span><br><span class="line">ctrl_interface&#x3D;DIR&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant GROUP&#x3D;netdev</span><br><span class="line">update_config&#x3D;1</span><br><span class="line"></span><br><span class="line">network&#x3D;&#123;</span><br><span class="line">    ssid&#x3D;&quot;你的WIFI网络名称&quot;</span><br><span class="line">    psk&#x3D;&quot;你的WIFI网络密码&quot;</span><br><span class="line">    key_mgmt&#x3D;WPA-PSK</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中wifi名称和密码都是要保留引号的，就是只改中文部分。</p>
<p>注意这里的<code>key_mgmt</code>不论你的网络加密是<code>WPA-PSK</code>还是<code>WPA2-PSK</code>统一写<code>WPA-PSK</code>。</p>
<h3 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h3><h4 id="方法一："><a href="#方法一：" class="headerlink" title="　方法一："></a>　方法一：</h4><p>进系统在命令行输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo &#x2F;etc&#x2F;init.d&#x2F;ssh start</span><br></pre></td></tr></table></figure>
<p>这种方法是临时的（重启后失效）</p>
<h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>TF卡连到电脑，打开直接新建名为<code>SSH</code>的文件（无后缀）。</p>
<p>这样子就可以通过SSH来连接树莓派了，我使用的是<code>PuTTY</code></p>
<p><a href="https://www.jianshu.com/p/654ee08d2b3a" target="_blank" rel="noopener">参考</a></p>
<h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><p>由于系统里默认的软件源受到墙的影响，速度不尽人意，建议（务必）换成墙内的软件源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &#39;s#:&#x2F;&#x2F;raspbian.raspberrypi.org#s:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;raspbian#g&#39; &#x2F;etc&#x2F;apt&#x2F;sources.list </span><br><span class="line">sudo sed -i &#39;s#:&#x2F;&#x2F;archive.raspberrypi.org&#x2F;debian#s:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;archive.raspberrypi.org&#x2F;debian#g&#39; &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;raspi.list</span><br></pre></td></tr></table></figure>
<p>更新本地软件引索</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p><a href="https://www.jianshu.com/p/67b9e6ebf8a0" target="_blank" rel="noopener">参考链接</a></p>
<h3 id="远程桌面连接"><a href="#远程桌面连接" class="headerlink" title="远程桌面连接"></a>远程桌面连接</h3><p>好像网络上有不少可以实现这个的软件，我捣鼓了许久只成功了这个（呜呜），所以推荐使用xrdp。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tightvncserver xrdp</span><br></pre></td></tr></table></figure>
<p>然后使用windows自带的远程桌面连接就可以远程桌面连接了。</p>
<p>ps: WIN + R 里运行 mstsc 可以装逼又快速的开启远程桌面连接。</p>
<p>ps: 建议调整一下分辨率，不全屏的连接使用体验更佳。</p>
<ul>
<li>待填坑：ftp；</li>
</ul>
<h2 id="软件篇"><a href="#软件篇" class="headerlink" title="软件篇"></a>软件篇</h2><h3 id="Pi-Dashboard"><a href="#Pi-Dashboard" class="headerlink" title="Pi Dashboard"></a>Pi Dashboard</h3><p><a href="https://make.quwj.com/project/10" target="_blank" rel="noopener">link</a></p>
<p>Pi Dashboard (Pi 仪表盘) 是一个开源的 IoT 设备监控工具，目前主要针对树莓派平台，也尽可能兼容其他类树莓派硬件产品。你只需要在树莓派上安装好 PHP 服务器环境，即可方便的部署一个 Pi 仪表盘，通过炫酷的 WebUI 来监控树莓派的状态！</p>
<p>目前已加入的监测项目有：</p>
<p>CPU 基本信息、状态和使用率等实时数据</p>
<p>内存、缓存、SWAP分区使用的实时数据</p>
<p>SD卡（磁盘）的占用情况</p>
<p>实时负载数据</p>
<p>实施进程数据</p>
<p>网络接口的实时数据</p>
<p>树莓派IP、运行时间、操作系统、HOST 等基础信息</p>
<p><strong>安装方法</strong></p>
<p>安装共2步，首先安装 Nginx 和 PHP。然后在 Nginx 目录通过 SFTP 或 GitHub 部署好本项目的程序。</p>
<h4 id="1-安装Nginx和PHP"><a href="#1-安装Nginx和PHP" class="headerlink" title="1.安装Nginx和PHP"></a>1.安装Nginx和PHP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install nginx php7.3-fpm php7.3-cli php7.3-curl php7.3-gd php7.3-cgi</span><br><span class="line">sudo service nginx start</span><br><span class="line">sudo service php7.3-fpm restart</span><br></pre></td></tr></table></figure>
<p>如果安装成功，可通过 <code>http://树莓派IP</code> 访问到 Nginx 的默认页。Nginx 的根目录在 <code>/var/www/html</code>。<br>进行以下操作来让 Nginx 能处理 PHP。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;default</span><br></pre></td></tr></table></figure>
<p>将其中的如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F; &#123;</span><br><span class="line">                # First attempt to serve request as file, then</span><br><span class="line">                # as directory, then fall back to displaying a 404.</span><br><span class="line">                try_files $uri $uri&#x2F; &#x3D;404;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>替换为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F; &#123;</span><br><span class="line">index  index.html index.htm index.php default.html default.htm default.php;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">location ~\.php$ &#123;</span><br><span class="line">fastcgi_pass unix:&#x2F;run&#x2F;php&#x2F;php7.3-fpm.sock;</span><br><span class="line">#fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">include fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存退出</p>
<p>开启Nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure>
<h4 id="2-部署-Pi-Dashboard"><a href="#2-部署-Pi-Dashboard" class="headerlink" title="2.部署 Pi Dashboard"></a>2.部署 Pi Dashboard</h4><p>SFTP请参照前文的链接。</p>
<p><strong>Github部署</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br><span class="line">cd &#x2F;var&#x2F;www&#x2F;html</span><br><span class="line">sudo git clone https:&#x2F;&#x2F;github.com&#x2F;spoonysonny&#x2F;pi-dashboard.git</span><br></pre></td></tr></table></figure>
<p>即可通过 <code>http://树莓派IP/pi-dashboard</code> 访问部署好了的 Pi Dashboard。</p>
<p>同样如果页面无法显示，可以尝试在树莓派终端给源码添加运行权限，例如你上传之后的路径是 <code>/var/www/html/pi-dashboard</code> ，则运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;var&#x2F;www&#x2F;html</span><br><span class="line">sudo chown -R www-data pi-dashboard</span><br></pre></td></tr></table></figure>
<h3 id="花生壳"><a href="#花生壳" class="headerlink" title="花生壳"></a>花生壳</h3><p>众所周知，当今社会很难搞到一个公网ip，这个时候就得用上内网穿透，而不够厉害的华华只能用一用花生壳这种比较友好的DDNS了。</p>
<p><a href="https://hsk.oray.com/download/" target="_blank" rel="noopener">花生壳官网</a> 下载树莓派版本，通过smb或者ftp或者u盘拷或者直接在花生壳上下载，把那个.deb文件放到树莓派里面。</p>
<p>然后终端cd到对应目录，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i phddns_rapi_3.0.4.armhf.deb</span><br></pre></td></tr></table></figure>
<p><strong>注</strong>：其中phddns_rapi_3.0.4.armhf.deb 很可能会因为<del>时间的流逝</del>版本更新发生变化，请手动换成安装包的名称</p>
<p>安装成功后，将显示树莓派的SN码、默认密码以及远程管理地址。</p>
<p><img src="/images/20170222174817450.jpg" alt=""></p>
<p>然后使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo phddns start</span><br></pre></td></tr></table></figure>
<p>就可以开启花生壳了。</p>
<p>其他命令（我就不翻译了，应该看得懂）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phddns start&#x2F;stop&#x2F;enable&#x2F;disable&#x2F;restart&#x2F;status&#x2F;reset&#x2F;version</span><br></pre></td></tr></table></figure>
<p>卸载命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -r phddns</span><br></pre></td></tr></table></figure>
<p>至于怎么调试内网穿透，请移步花生壳官网。</p>
<h3 id="smb服务器"><a href="#smb服务器" class="headerlink" title="smb服务器"></a>smb服务器</h3><p>可以利用树莓派共享文件夹，在别的机子上通过smb协议读写树莓派上的文件，就像读写本机的文件一样。我这里是打算当成全家的一个共享硬盘，可以放一些电影、视频、番、音乐，在各个设备上轻松的访问。</p>
<p>首先安装samba</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install samba samba-common-bin</span><br></pre></td></tr></table></figure>
<p>安装的时候会弹出一个窗口要求安装<code>dhcp-client</code>软件包，我也不知道是啥，点是就对了。</p>
<p>然后设置一个smb的账户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo smbpasswd -a pi</span><br></pre></td></tr></table></figure>
<p>后面会跟着让我们输入密码，建议和树莓派账户的密码设成一样的，不容易记混。</p>
<p>接着创建一个目录，作为共享的文件夹。当然也可以不设，随便找一个现成的文件夹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;home&#x2F;pi&#x2F;smbshare</span><br></pre></td></tr></table></figure>
<p>mkdir 是创建文件夹的命令，后面的路径和文件夹名自己选一个喜欢的就好。</p>
<p>还要给这个文件夹权限，不然无法读写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 777 &#x2F;home&#x2F;pi&#x2F;smbshare</span><br></pre></td></tr></table></figure>
<p>接着修改一下配置文件，让路径可用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano &#x2F;etc&#x2F;samba&#x2F;smb.conf</span><br></pre></td></tr></table></figure>
<p>翻到整个文件最后面添加上这些内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[share]</span><br><span class="line">path &#x3D; &#x2F;home&#x2F;pi&#x2F;smbshare</span><br><span class="line">public &#x3D; yes</span><br><span class="line">writable &#x3D; yes</span><br><span class="line">valid users &#x3D; pi</span><br><span class="line">create mask &#x3D; 0644</span><br><span class="line">force create mode &#x3D; 0644</span><br><span class="line">directory mask &#x3D; 0755</span><br><span class="line">force directory mode &#x3D; 0755</span><br><span class="line">available &#x3D; yes</span><br></pre></td></tr></table></figure>
<p>重启smb服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br></pre></td></tr></table></figure>
<p>然后smb就可以用了，怎么在别的设备上挂载smb服务器就不是这里要教的了，不懂请出门左转Google。</p>
<p>这里记录一下 CrystalDiskMark 跑分：<br>直接写TF卡，电脑Wifi速率400MB，树莓派有线速率1G。<br>| MB/s | Read | Write |<br>| - | - | - |<br>| Seq | 25.88 | 21.19 |<br>| 512K | 23.69 | 17.24 |<br>| 4K| 1.763 | 1.160 |<br>| 4K QD32| 2.116 | 7.880 |</p>
<p>瓶颈应该在于TF卡的读写速度而不是网速，这个速度不是非常快，但满足日常的需求应该绰绰有余了。（等我哪天学会了怎么挂硬盘并买得起固态的时候再测一测极限速度）</p>
<ul>
<li>待填坑：挂载u盘、硬盘；</li>
</ul>
<h3 id="kodi"><a href="#kodi" class="headerlink" title="kodi"></a>kodi</h3><p>kodi是一个媒体播放器，我打算用于连接电视做一个机顶盒，目前预期功能是利用UPnP媒体服务器和smb服务器播放局域网内的媒体。</p>
<p>安装kodi：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install kodi</span><br></pre></td></tr></table></figure>
<p>然后运行kodi</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kodi</span><br></pre></td></tr></table></figure>
<p>没了。</p>
<p>一开始kodi很慢，后面发现是wifi跟不上视频的码率，所以换了有线连接，然后就可用了。<br>（但说实话除了能遥控之外并没有比直接用Raspbian里的smb配vlc播放视频来的方便）</p>
<h3 id="moonlight"><a href="#moonlight" class="headerlink" title="moonlight"></a>moonlight</h3><p>这个是配合Nvidia卡进行串流的应用，可以用来远程利用电脑的算力来打树莓派带不动的游戏。<br>甚至可以通过毒瘤方法把整个系统当作一个游戏来远程使用（失败了 *见后文）。</p>
<p><a href="https://github.com/irtimmer/moonlight-embedded/wiki/Packages" target="_blank" rel="noopener">github教程</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano &#x2F;etc&#x2F;apt&#x2F;sources.list</span><br></pre></td></tr></table></figure>
<p>添加源：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http:&#x2F;&#x2F;archive.itimmer.nl&#x2F;raspbian&#x2F;moonlight buster main</span><br></pre></td></tr></table></figure>
<p>如果直接update会显示无法认证源，默认禁用。所以添加签名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;archive.itimmer.nl&#x2F;itimmer.gpg</span><br><span class="line">sudo apt-key add itimmer.gpg</span><br></pre></td></tr></table></figure>
<p>然后安装moonlight。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install moonlight-embedded</span><br></pre></td></tr></table></figure>
<p>接着匹配电脑，x.x.x.x表示电脑局域网ipv4的ip。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moonlight pair x.x.x.x</span><br></pre></td></tr></table></figure>
<p>开启串流。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moonlight stream x.x.x.x</span><br></pre></td></tr></table></figure>
<p>可选的选项，（插入在<code>stream</code>与<code>x.x.x.x</code>之间）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-720 Use 1280x720 resolution [default]</span><br><span class="line">-1080 Use 1920x1080 resolution</span><br><span class="line">-width Horizontal resolution (default 1280)</span><br><span class="line">-height Vertical resolution (default 720)</span><br><span class="line">-30fps Use 30fps (好像这个和下面的那个60fps失效了)</span><br><span class="line">-60fps Use 60fps [default]</span><br><span class="line">-bitrate Specify the bitrate in Kbps</span><br><span class="line">-packetsize Specify the maximum packetsize in bytes</span><br><span class="line">-app Name of app to stream</span><br><span class="line">-nosops Don&#39;t allow GFE to modify game settings</span><br><span class="line">-input Use as input. Can be used multiple times</span><br><span class="line">-mapping Use as gamepad mapping configuration file (use before -input)</span><br><span class="line">-audio Use as ALSA audio output device (default sysdefault)</span><br><span class="line">-localaudio Play audio locally</span><br></pre></td></tr></table></figure>
<p>几个快捷键</p>
<ul>
<li>Ctrl + Alt + Shift + Z 切换鼠标指针捕获</li>
<li>Ctrl + Alt + Shift + X 切换全屏和窗口模式</li>
<li>Ctrl + Alt + Shift + Q 退出流媒体对话（最常用的）（游戏还在运行）</li>
</ul>
<p>附：<strong>失败原因</strong></p>
<p>本以为moonlight可以和win\macOS\iOS\Android一样通过运行mstsc.exe来实现整个系统的串流，但是树莓派版的moonlight强制开启steam的big screen模式，就只能打游戏了。本来以为可以和steam link一样退出大屏幕模式，但是moonlight只有直接退出remote play这个选项，点了就直接停止串流了。那么为什么不用steam link呢？我steam link出了一点小bug，点开没有反应，所以只能将就着用moonlight了。</p>
<h2 id="随手记的一些笔记"><a href="#随手记的一些笔记" class="headerlink" title="随手记的一些笔记"></a>随手记的一些笔记</h2><h3 id="Linux指令"><a href="#Linux指令" class="headerlink" title="Linux指令"></a><a href="/2020/05/29/Linux常用指令/">Linux指令</a></h3><h3 id="处理器温度"><a href="#处理器温度" class="headerlink" title="处理器温度"></a>处理器温度</h3><ol>
<li>树莓派的CPU温度信息位于文件 /sys/class/thermal/thermal_zone0/temp中，该文件为一个只读文件。 </li>
<li>文件里的数字除以1000，单位为摄氏度。</li>
</ol>
<p>可以用<code>watch</code>指令循环打印。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 cat &#x2F;sys&#x2F;class&#x2F;thermal&#x2F;thermal_zone0&#x2F;temp</span><br></pre></td></tr></table></figure>
<h3 id="查看网口速率"><a href="#查看网口速率" class="headerlink" title="查看网口速率"></a>查看网口速率</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool eth0</span><br></pre></td></tr></table></figure>
<p>其中 <code>Speed: 1000MB/s</code> 即为网口速率。</p>
<h3 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano &#x2F;etc&#x2F;rc.local</span><br></pre></td></tr></table></figure>
<p><code>exit 0</code>前的代码都会在启动前被执行</p>
<h1 id="剩下的慢慢来"><a href="#剩下的慢慢来" class="headerlink" title="剩下的慢慢来"></a>剩下的慢慢来</h1>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/" rel="tag"># 操作指南</a>
          
            <a href="/tags/RaspberryPi/" rel="tag"># RaspberryPi</a>
          
            <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag"># 树莓派</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/05/12/%E9%AB%98%E4%B8%AD%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86/" rel="next" title="高中数学知识">
                <i class="fa fa-chevron-left"></i> 高中数学知识
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/27/%E6%9D%82%E9%80%89%E6%91%98%E5%BD%95/" rel="prev" title="杂选摘录">
                杂选摘录 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/hh.jpg"
                alt="HH" />
            
              <p class="site-author-name" itemprop="name">HH</p>
              <p class="site-description motion-element" itemprop="description">今日も可愛い！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化树莓派"><span class="nav-number">1.</span> <span class="nav-text">初始化树莓派</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装Raspbian"><span class="nav-number">1.1.</span> <span class="nav-text">安装Raspbian</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本配置"><span class="nav-number">1.2.</span> <span class="nav-text">基本配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络连接"><span class="nav-number">1.3.</span> <span class="nav-text">网络连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#有线"><span class="nav-number">1.3.1.</span> <span class="nav-text">有线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Wifi"><span class="nav-number">1.3.2.</span> <span class="nav-text">Wifi</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSH"><span class="nav-number">1.4.</span> <span class="nav-text">SSH</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#方法一："><span class="nav-number">1.4.1.</span> <span class="nav-text">　方法一：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法二："><span class="nav-number">1.4.2.</span> <span class="nav-text">方法二：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换源"><span class="nav-number">1.5.</span> <span class="nav-text">换源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#远程桌面连接"><span class="nav-number">1.6.</span> <span class="nav-text">远程桌面连接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#软件篇"><span class="nav-number">2.</span> <span class="nav-text">软件篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pi-Dashboard"><span class="nav-number">2.1.</span> <span class="nav-text">Pi Dashboard</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-安装Nginx和PHP"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.安装Nginx和PHP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-部署-Pi-Dashboard"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.部署 Pi Dashboard</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#花生壳"><span class="nav-number">2.2.</span> <span class="nav-text">花生壳</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#smb服务器"><span class="nav-number">2.3.</span> <span class="nav-text">smb服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kodi"><span class="nav-number">2.4.</span> <span class="nav-text">kodi</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#moonlight"><span class="nav-number">2.5.</span> <span class="nav-text">moonlight</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随手记的一些笔记"><span class="nav-number">3.</span> <span class="nav-text">随手记的一些笔记</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux指令"><span class="nav-number">3.1.</span> <span class="nav-text">Linux指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理器温度"><span class="nav-number">3.2.</span> <span class="nav-text">处理器温度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看网口速率"><span class="nav-number">3.3.</span> <span class="nav-text">查看网口速率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开机启动"><span class="nav-number">3.4.</span> <span class="nav-text">开机启动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#剩下的慢慢来"><span class="nav-number"></span> <span class="nav-text">剩下的慢慢来</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HH</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>
